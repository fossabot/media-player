{"version":3,"sources":["rangeSlider/rangeSlider.js","rangeSlider/index.js","audioPlayer/audioPlayer.js","audioPlayer/index.js","videoPlayer/videoPlayer.js","videoPlayer/index.js","mediaPlayer.js","index.js"],"names":["defaultOptions","className","total","value","draggerSize","barHeight","onChange","min","max","RangeSlider","parent","options","Object","assign","document","body","isMoving","container","dragger","bar","_handleMouseDown","bind","_handleMouseUp","_handleMouseMove","_handleResize","_init","_render","position","_calculatePosition","_updateUI","createElement","style","height","paddingLeft","paddingRight","width","top","positionMax","Math","round","_getPositionMax","_createContainer","_createBar","_createDragger","appendChild","_bindEvent","event","elementLeft","getBoundingClientRect","left","documentElement","scrollLeft","abs","mousePos","pageX","offsetWidth","_calculateValue","setValue","_move","addEventListener","window","removeEventListener","slider","_createSlider","innerHTML","_removeEvent","autoPlay","duration","url","AudioPlayer","timeHoler","toggleBtn","isPlaying","player","sliderId","_getSliderId","togglePlay","_createUI","_initialPlayer","_initialEvents","onclick","Error","Audio","onloadedmetadata","_initializeSlider","_updateTimeDisplay","currentTime","ontimeupdate","time","currentTarget","onended","_playStatusChange","onpause","onerror","preload","undefined","play","pause","querySelector","randLetter","String","fromCharCode","floor","random","Date","now","toggle","progress","timer","innerText","append","_formatTime2HHMMSS","seconds","date","setMilliseconds","result","toISOString","substr","splits","split","length","slice","join","_removeEvents","isInlinePlay","VideoPlayer","src","playBtn","_openPopup","setAttribute","popup","videoWrapper","closeBtn","removeChild","cloneNode","players","initialSingletonPlay","e","i","len","target","MediaPlayer","type","createPlayer","push"],"mappings":"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","file":"index.map","sourceRoot":"../src","sourcesContent":["// reference: https://stackoverflow.com/a/33006528/1553656\n\nimport \"./rangeSlider.css\";\n\nconst defaultOptions = {\n  className: \"\",\n\n  total: 100,\n  value: 0,\n  draggerSize: 12,\n  barHeight: 2,\n  onChange: null,\n\n  min: 0,\n  max: 100\n};\n\nexport default class RangeSlider {\n  constructor(parent, options) {\n    this.options = Object.assign({}, defaultOptions, options);\n    this.parent = parent || document.body;\n    this.isMoving = false;\n    this.container = null;\n    this.dragger = null;\n    this.bar = null;\n\n    this._handleMouseDown = this._handleMouseDown.bind(this);\n    this._handleMouseUp = this._handleMouseUp.bind(this);\n    this._handleMouseMove = this._handleMouseMove.bind(this);\n    this._handleResize = this._handleResize.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    this._render();\n    const position = this._calculatePosition(this.options.value);\n    this._updateUI(position);\n  }\n\n  _createContainer() {\n    const container = document.createElement(\"div\");\n    container.className = `range-slider ${this.options.className}`;\n    container.style.height = `${this.options.barHeight}px`;\n    this.container = container;\n    return container;\n  }\n\n  _createBar() {\n    const bar = document.createElement(\"span\");\n    bar.style.height = `${this.options.barHeight}px`;\n    bar.style.paddingLeft = `${this.options.draggerSize / 2}px`;\n    bar.style.paddingRight = `${this.options.draggerSize / 2}px`;\n    bar.className = \"progress-bar\";\n    this.bar = bar;\n    return bar;\n  }\n\n  _createDragger() {\n    const dragger = document.createElement(\"span\");\n    dragger.style.width = `${this.options.draggerSize}px`;\n    dragger.style.height = `${this.options.draggerSize}px`;\n    dragger.style.top = `-${(this.options.draggerSize -\n      this.options.barHeight) /\n      2}px`;\n    dragger.className = \"progress-dragger\";\n    this.dragger = dragger;\n    return dragger;\n  }\n\n  _calculateValue(position, positionMax) {\n    const value =\n      (position * (this.options.max - this.options.min)) / positionMax +\n      this.options.min;\n    return Math.round(value);\n  }\n\n  _calculatePosition(value) {\n    const positionMax = this._getPositionMax();\n    return (\n      ((value - this.options.min) * positionMax) /\n      (this.options.max - this.options.min)\n    );\n  }\n\n  _createSlider() {\n    const container = this._createContainer();\n    const bar = this._createBar();\n    const dragger = this._createDragger();\n    bar.appendChild(dragger);\n    container.appendChild(bar);\n\n    this._bindEvent(container);\n\n    return container;\n  }\n\n  _move(event) {\n    if (!this.isMoving) return;\n    let min = 0,\n      max = this._getPositionMax();\n\n    // Instead of using `offsetLeft`, we need to using `getBoundingClientRect().left. Because the offsetLeft is relative to none static parent.\n    let elementLeft = this.container.getBoundingClientRect().left;\n\n    // fix for scroll\n    elementLeft += document.documentElement.scrollLeft;\n\n    if (elementLeft < 0) elementLeft = Math.abs(elementLeft) / 2;\n    let mousePos = event.pageX - elementLeft - this.dragger.offsetWidth / 2,\n      position = mousePos > max ? max : mousePos < min ? min : mousePos;\n\n    const value = this._calculateValue(position, max);\n    this.setValue(value);\n    if (this.options.onChange) {\n      this.options.onChange(value);\n    }\n  }\n\n  _getPositionMax() {\n    return this.container.offsetWidth - this.dragger.offsetWidth;\n  }\n\n  _updateUI(position) {\n    const positionMax = this._getPositionMax();\n    this.dragger.style.left = `${position}px`;\n    let width = (position / positionMax) * 100;\n    this.bar.style.width = `${width}%`;\n  }\n\n  _handleMouseDown(event) {\n    this.isMoving = true;\n    this._move(event);\n  }\n\n  _handleMouseUp(event) {\n    this.isMoving = false;\n  }\n\n  _handleMouseMove(event) {\n    this._move(event);\n  }\n\n  _handleResize(event) {\n    this._init();\n  }\n\n  _bindEvent(container) {\n    container.addEventListener(\"mousedown\", this._handleMouseDown);\n    document.addEventListener(\"mouseup\", this._handleMouseUp);\n    document.addEventListener(\"mousemove\", this._handleMouseMove);\n    window.addEventListener(\"resize\", this._handleResize, true);\n  }\n\n  _removeEvent() {\n    if (!this.container) return;\n    this.container.removeEventListener(\"mousedown\", this._handleMouseDown);\n    document.removeEventListener(\"mouseup\", this._handleMouseUp);\n    document.removeEventListener(\"mousemove\", this._handleMouseMove);\n  }\n\n  _render() {\n    const slider = this._createSlider();\n    this.parent.innerHTML = \"\";\n    this.parent.appendChild(slider);\n  }\n\n  destroy() {\n    this._removeEvent();\n  }\n\n  getValue() {\n    return this.options.value;\n  }\n\n  setValue(value) {\n    this.options.value = value;\n    const position = this._calculatePosition(value);\n    this._updateUI(position);\n  }\n}\n","export {default} from './rangeSlider'","/*\n * @author: wayou\n * @date: 2018-11-08 10:25:29\n * @description: audio player with ui control\n * media events references:\n * https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events\n *\n */\n\nimport './audioPlayer.css';\nimport RangeSlider from '../rangeSlider';\n\nconst defaultOptions = {\n  parent: document.body,\n  autoPlay: false,\n  duration: 0,\n  url: ''\n};\n\nexport default class AudioPlayer {\n  constructor(options) {\n    this.options = Object.assign({}, defaultOptions, options);\n\n    this.container = null;\n    this.timeHoler = null;\n    this.toggleBtn = null;\n    this.slider = null;\n    this.isPlaying = false;\n    this.player = null;\n    this.sliderId = this._getSliderId();\n\n    this.togglePlay = this.togglePlay.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    this.container = this._createUI();\n    this.options.parent.innerHTML = '';\n    this.options.parent.appendChild(this.container);\n\n    this._initialPlayer();\n    this._initialEvents();\n  }\n\n  _initialEvents() {\n    this.toggleBtn.onclick = this.togglePlay;\n  }\n\n  _initialPlayer() {\n    if (!this.options.url) {\n      throw new Error(`missing audio url`);\n    }\n\n    this.player = new Audio(this.options.url);\n    this.player.onloadedmetadata = () => {\n      this._initializeSlider(this.player.duration);\n      this._updateTimeDisplay(this.player.currentTime, this.player.duration);\n    };\n\n    this.player.ontimeupdate = event => {\n      const time = event.currentTarget.currentTime;\n      this.slider.setValue(time);\n      this._updateTimeDisplay(time, this.player.duration);\n    };\n\n    this.player.onended = () => {\n      this._playStatusChange(false);\n    };\n\n    this.player.onpause = () => {\n      this._playStatusChange(false);\n    };\n\n    this.player.onerror = () => {\n      this._playStatusChange(false);\n    };\n\n    this.player.preload = 'metadata';\n\n    // we need to append the audio to DOM or the document.addEventListener won't\n    // fire\n    this.container.appendChild(this.player);\n  }\n\n  _removeEvents() {\n    this.toggleBtn.onclick = undefined;\n  }\n\n  togglePlay() {\n    const isPlaying = !this.isPlaying;\n    if (isPlaying) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  play() {\n    this.player.play();\n    this._playStatusChange(true);\n  }\n\n  pause() {\n    this.player.pause();\n    this._playStatusChange(false);\n  }\n\n  _playStatusChange(isPlaying) {\n    this.isPlaying = isPlaying;\n    this.toggleBtn.className = `icon icon-${this.isPlaying ? 'pause' : 'play'}`;\n  }\n\n  _initializeSlider(duration) {\n    this.slider = new RangeSlider(document.querySelector(`#${this.sliderId}`), {\n      max: duration,\n      onChange: value => {\n        this.player.currentTime = value;\n      }\n    });\n  }\n\n  /**\n   * guid generation taken from\n   * https://stackoverflow.com/questions/6860853/generate-random-string-for-div-id/6860916#6860916\n   */\n  _getSliderId() {\n    var randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));\n    return randLetter + Date.now();\n  }\n\n  _createUI() {\n    const container = document.createElement('div');\n    container.className = 'audio-player';\n\n    const toggle = document.createElement('div');\n    toggle.className = 'player-section player-toggle';\n    this.toggleBtn = document.createElement('span');\n    this.toggleBtn.className = `icon icon-play`;\n    toggle.appendChild(this.toggleBtn);\n    container.appendChild(toggle);\n\n    const progress = document.createElement('div');\n    progress.className = 'player-section player-progress';\n    progress.innerHTML =\n        `<div class=\"player-slider\" id=\"${this.sliderId}\"></div>`;\n    container.appendChild(progress);\n\n    const timer = document.createElement('div');\n    timer.className = 'player-section player-time';\n    this.timeHoler = document.createElement('div');\n    this.timeHoler.className = 'time';\n    this.timeHoler.innerText = '00:00';\n    timer.append(this.timeHoler);\n\n    container.appendChild(timer);\n    return container;\n  }\n\n  _updateTimeDisplay(time, duration) {\n    time = this._formatTime2HHMMSS(time);\n    duration = this._formatTime2HHMMSS(duration);\n    this.timeHoler.innerText = `${time} / ${duration}`;\n  }\n\n  _formatTime2HHMMSS(seconds) {\n    const date = new Date(null);\n    date.setMilliseconds(seconds * 1000);\n    let result = date.toISOString().substr(11, 8);\n\n    let splits = result.split(':');\n    if (splits.length > 2 && splits[0] === '00') {\n      result = splits.slice(1).join(':');\n    }\n    return result;\n  }\n\n  destroy() {\n    this._removeEvents();\n  }\n}\n","export { default } from \"./audioPlayer\";\n","/*\n * @author: wayou\n * @date: 2018-11-08 14:38:53\n * @description: video player\n */\n\nimport \"./videoPlayer.css\";\n\nconst defaultOptions = {\n  parent: document.body,\n  autoPlay: false,\n  duration: 0,\n  isInlinePlay: true\n};\n\nexport default class VideoPlayer {\n  constructor(options) {\n    this.options = Object.assign({}, defaultOptions, options);\n\n    this.container = null;\n    this.isPlaying = false;\n    this.player = null;\n\n    this.togglePlay = this.togglePlay.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    this.container = this._createUI();\n    this.options.parent.innerHTML = \"\";\n    this.options.parent.appendChild(this.container);\n\n    this._initialPlayer();\n  }\n\n  _initialPlayer() {\n    if (!this.options.url) {\n      throw new Error(`missing video url`);\n    }\n\n    this.player = document.createElement(\"video\");\n    this.player.src = this.options.url;\n\n    if (!this.options.isInlinePlay) {\n      const playBtn = document.createElement(\"span\");\n      playBtn.className = \"icon icon-video-start-play\";\n      playBtn.onclick = () => {\n        // TODO:\n        // - open popup\n        // - show controls\n        // - play video\n        this._openPopup();\n      };\n      this.container.appendChild(playBtn);\n    } else {\n      this.player.setAttribute(\"controls\", \"controls\");\n    }\n    this.container.appendChild(this.player);\n  }\n\n  togglePlay() {\n    const isPlaying = !this.isPlaying;\n    if (isPlaying) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  play() {\n    this.player.play();\n    this._playStatusChange(true);\n  }\n\n  pause() {\n    this.player.pause();\n    this._playStatusChange(false);\n  }\n\n  _playStatusChange(isPlaying) {\n    this.isPlaying = isPlaying;\n  }\n\n  _createUI() {\n    const container = document.createElement(\"div\");\n    container.className = \"video-player\";\n    return container;\n  }\n\n  _openPopup() {\n    const popup = document.createElement(\"div\");\n    popup.className = \"video-player-popup\";\n\n    const videoWrapper = document.createElement(\"div\");\n    videoWrapper.className = \"popup-video-wrapper\";\n    popup.appendChild(videoWrapper);\n\n    const closeBtn = document.createElement(\"span\");\n    closeBtn.className = \"icon icon-video-close\";\n    closeBtn.onclick = () => {\n      document.body.removeChild(popup);\n    };\n\n    const player = this.player.cloneNode(true);\n    player.setAttribute(\"controls\", \"controls\");\n    videoWrapper.appendChild(player);\n    player.play();\n\n    videoWrapper.appendChild(closeBtn);\n    document.body.appendChild(popup);\n  }\n}\n","export { default } from \"./videoPlayer\";\n","/*\n * @author: wayou\n * @date: 2018-11-07 16:02:02\n * @description: collections of players with the guarantee of only one player is\n * playing\n */\n\nimport AudioPlayer from './audioPlayer';\nimport VideoPlayer from './videoPlayer';\n\nconst players = [];\n\nfunction initialSingletonPlay() {\n  // guarantee that here's only one player is playing\n  document.addEventListener('play', e => {\n    for (var i = 0, len = players.length; i < len; i++) {\n      if (players[i].player != e.target) {\n        players[i].player.pause();\n      }\n    }\n  }, true);\n}\n\ninitialSingletonPlay();\n\nconst defaultOptions = {\n  parent: document.body,\n  autoPlay: false,\n  duration: 0,\n  url: '',\n  // playing the video inline or in popup\n  isInlinePlay: true\n};\n\nexport default class MediaPlayer {\n  constructor(type, options) {\n    this.options = Object.assign({}, defaultOptions, options);\n    this.type = type;\n    this._init(this.options);\n  }\n\n  _init(options) {\n    const player = this.createPlayer(options);\n    players.push(player);\n  }\n\n  createPlayer(options) {\n    if (this.type === 'audio') {\n      return new AudioPlayer(options);\n    }\n    if (this.type === 'video') {\n      return new VideoPlayer(options);\n    }\n  }\n}\n","export { default } from \"./mediaPlayer\";\n"]}