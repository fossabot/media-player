{"version":3,"sources":["rangeSlider.js","index.js","audioPlayer.js"],"names":["defaultOptions","className","value","draggerSize","barHeight","onChange","min","max","precision","RangeSlider","parent","options","Object","assign","document","body","isMoving","container","dragger","bar","_handleMouseDown","bind","_handleMouseUp","_handleMouseMove","_handleResize","_init","_render","position","_calculatePosition","_updateUI","createElement","style","height","paddingLeft","paddingRight","width","top","positionMax","toFixed","_getPositionMax","_createContainer","_createBar","_createDragger","appendChild","_bindEvent","event","elementLeft","getBoundingClientRect","left","documentElement","scrollLeft","Math","abs","mousePos","pageX","offsetWidth","_calculateValue","setValue","_move","addEventListener","window","removeEventListener","slider","_createSlider","innerHTML","_removeEvent","autoPlay","duration","url","AudioPlayer","timeHoler","toggleBtn","isPlaying","player","sliderId","_getSliderId","togglePlay","_createUI","_initialPlayer","_initialEvents","onclick","Error","Audio","onloadedmetadata","_initializeSlider","_updateTimeDisplay","currentTime","ontimeupdate","time","currentTarget","onended","_playStatusChange","onpause","onerror","preload","undefined","play","pause","querySelector","randLetter","String","fromCharCode","floor","random","Date","now","toggle","progress","timer","innerText","append","_formatTime2HHMMSS","seconds","date","setMilliseconds","result","toISOString","substr","splits","split","length","slice","join","_removeEvents"],"mappings":";;;;;AAqLG,aAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EAnLH,QAAA,qBAEA,IAAMA,EAAiB,CACrBC,UAAW,GAEXC,MAAO,EACPC,YAAa,GACbC,UAAW,EACXC,SAAU,KAEVC,IAAK,EACLC,IAAK,IACLC,UAAW,GAGQC,EAoKlB,WAnKWC,SAAAA,EAAAA,EAAQC,GAAS,EAAA,KAAA,GACtBA,KAAAA,QAAUC,OAAOC,OAAO,GAAIb,EAAgBW,GAC5CD,KAAAA,OAASA,GAAUI,SAASC,KAC5BC,KAAAA,UAAW,EACXC,KAAAA,UAAY,KACZC,KAAAA,QAAU,KACVC,KAAAA,IAAM,KAENC,KAAAA,iBAAmB,KAAKA,iBAAiBC,KAAK,MAC9CC,KAAAA,eAAiB,KAAKA,eAAeD,KAAK,MAC1CE,KAAAA,iBAAmB,KAAKA,iBAAiBF,KAAK,MAC9CG,KAAAA,cAAgB,KAAKA,cAAcH,KAAK,MAExCI,KAAAA,QAsJN,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,QAnJO,MAAA,WACDC,KAAAA,UACCC,IAAAA,EAAW,KAAKC,mBAAmB,KAAKjB,QAAQT,OACjD2B,KAAAA,UAAUF,KAgJhB,CAAA,IAAA,mBA7IkB,MAAA,WACXV,IAAAA,EAAYH,SAASgB,cAAc,OAIlCb,OAHPA,EAAUhB,UAA4B,gBAAA,OAAA,KAAKU,QAAQV,WACnDgB,EAAUc,MAAMC,OAAY,GAAA,OAAA,KAAKrB,QAAQP,UAAzC,MACKa,KAAAA,UAAYA,EACVA,IAwIR,CAAA,IAAA,aArIY,MAAA,WACLE,IAAAA,EAAML,SAASgB,cAAc,QAM5BX,OALPA,EAAIY,MAAMC,OAAY,GAAA,OAAA,KAAKrB,QAAQP,UAAnC,MACAe,EAAIY,MAAME,YAAiB,GAAA,OAAA,KAAKtB,QAAQR,YAAc,EAAtD,MACAgB,EAAIY,MAAMG,aAAkB,GAAA,OAAA,KAAKvB,QAAQR,YAAc,EAAvD,MACAgB,EAAIlB,UAAY,eACXkB,KAAAA,IAAMA,EACJA,IA8HR,CAAA,IAAA,iBA3HgB,MAAA,WACTD,IAAAA,EAAUJ,SAASgB,cAAc,QAQhCZ,OAPPA,EAAQa,MAAMI,MAAW,GAAA,OAAA,KAAKxB,QAAQR,YAAtC,MACAe,EAAQa,MAAMC,OAAY,GAAA,OAAA,KAAKrB,QAAQR,YAAvC,MACAe,EAAQa,MAAMK,IAAU,IAAA,QAAC,KAAKzB,QAAQR,YACpC,KAAKQ,QAAQP,WACb,EAFF,MAGAc,EAAQjB,UAAY,mBACfiB,KAAAA,QAAUA,EACRA,IAkHR,CAAA,IAAA,kBA/GeS,MAAAA,SAAAA,EAAUU,GAIjB,QAFJV,GAAY,KAAKhB,QAAQJ,IAAM,KAAKI,QAAQL,KAAQ+B,EACrD,KAAK1B,QAAQL,KACDgC,QAAQ,KAAK3B,QAAQH,aA2GpC,CAAA,IAAA,qBAxGkBN,MAAAA,SAAAA,GACXmC,IAAAA,EAAc,KAAKE,kBAEtB,OAACrC,EAAQ,KAAKS,QAAQL,KAAO+B,GAC7B,KAAK1B,QAAQJ,IAAM,KAAKI,QAAQL,OAoGpC,CAAA,IAAA,gBAhGe,MAAA,WACRW,IAAAA,EAAY,KAAKuB,mBACjBrB,EAAM,KAAKsB,aACXvB,EAAU,KAAKwB,iBAMdzB,OALPE,EAAIwB,YAAYzB,GAChBD,EAAU0B,YAAYxB,GAEjByB,KAAAA,WAAW3B,GAETA,IAuFR,CAAA,IAAA,QApFK4B,MAAAA,SAAAA,GACA,GAAC,KAAK7B,SAAN,CACAV,IACFC,EAAM,KAAKgC,kBAKTO,EAAc,KAAK7B,UAAU8B,wBAAwBC,MAGzDF,GAAehC,SAASmC,gBAAgBC,YAEtB,IAAGJ,EAAcK,KAAKC,IAAIN,GAAe,GACvDO,IAAAA,EAAWR,EAAMS,MAAQR,EAAc,KAAK5B,QAAQqC,YAAc,EACpE5B,EAAW0B,EAAW9C,EAAMA,EAAM8C,EAb1B,EAAA,EAaiDA,EAErDnD,EAAQ,KAAKsD,gBAAgB7B,EAAUpB,GACxCkD,KAAAA,SAASvD,GACV,KAAKS,QAAQN,UACVM,KAAAA,QAAQN,SAASH,MAgEzB,CAAA,IAAA,kBA5DiB,MAAA,WACT,OAAA,KAAKe,UAAUsC,YAAc,KAAKrC,QAAQqC,cA2DlD,CAAA,IAAA,YAxDS5B,MAAAA,SAAAA,GACFU,IAAAA,EAAc,KAAKE,kBACpBrB,KAAAA,QAAQa,MAAMiB,KAAUrB,GAAAA,OAAAA,EAA7B,MACIQ,IAAAA,EAASR,EAAWU,EAAe,IAClClB,KAAAA,IAAIY,MAAMI,MAAWA,GAAAA,OAAAA,EAA1B,OAoDD,CAAA,IAAA,mBAjDgBU,MAAAA,SAAAA,GACV7B,KAAAA,UAAW,EACX0C,KAAAA,MAAMb,KA+CZ,CAAA,IAAA,iBA5CcA,MAAAA,SAAAA,GACR7B,KAAAA,UAAW,IA2CjB,CAAA,IAAA,mBAxCgB6B,MAAAA,SAAAA,GACVa,KAAAA,MAAMb,KAuCZ,CAAA,IAAA,gBApCaA,MAAAA,SAAAA,GACPpB,KAAAA,UAmCN,CAAA,IAAA,aAhCUR,MAAAA,SAAAA,GACTA,EAAU0C,iBAAiB,YAAa,KAAKvC,kBAC7CN,SAAS6C,iBAAiB,UAAW,KAAKrC,gBAC1CR,SAAS6C,iBAAiB,YAAa,KAAKpC,kBAC5CqC,OAAOD,iBAAiB,SAAU,KAAKnC,eAAe,KA4BvD,CAAA,IAAA,eAzBc,MAAA,WACR,KAAKP,YACLA,KAAAA,UAAU4C,oBAAoB,YAAa,KAAKzC,kBACrDN,SAAS+C,oBAAoB,UAAW,KAAKvC,gBAC7CR,SAAS+C,oBAAoB,YAAa,KAAKtC,qBAqBhD,CAAA,IAAA,UAlBS,MAAA,WACFuC,IAAAA,EAAS,KAAKC,gBACfrD,KAAAA,OAAOsD,UAAY,GACnBtD,KAAAA,OAAOiC,YAAYmB,KAezB,CAAA,IAAA,UAZS,MAAA,WACHG,KAAAA,iBAWN,CAAA,IAAA,WARU,MAAA,WACF,OAAA,KAAKtD,QAAQT,QAOrB,CAAA,IAAA,WAJQA,MAAAA,SAAAA,GACFS,KAAAA,QAAQT,MAAQA,EACfyB,IAAAA,EAAW,KAAKC,mBAAmB1B,GACpC2B,KAAAA,UAAUF,OAChB,EAAA,GAAA,QAAA,QAAA;;ACrLH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,OAAA,eAAA,QAAA,UAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,WAAA,IAAA,EAAA,EAAA,QAAA,kBAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA;;ACmLG,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,aAAA,EA1KH,QAAA,qBACA,IAAA,EAAA,EAAA,QAAA,mBAyKG,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA,GAAA,SAAA,EAAA,EAAA,GAAA,KAAA,aAAA,GAAA,MAAA,IAAA,UAAA,qCAAA,SAAA,EAAA,EAAA,GAAA,IAAA,IAAA,EAAA,EAAA,EAAA,EAAA,OAAA,IAAA,CAAA,IAAA,EAAA,EAAA,GAAA,EAAA,WAAA,EAAA,aAAA,EAAA,EAAA,cAAA,EAAA,UAAA,IAAA,EAAA,UAAA,GAAA,OAAA,eAAA,EAAA,EAAA,IAAA,IAAA,SAAA,EAAA,EAAA,EAAA,GAAA,OAAA,GAAA,EAAA,EAAA,UAAA,GAAA,GAAA,EAAA,EAAA,GAAA,EAvKH,IAAM3B,EAAiB,CACrBU,OAAQI,SAASC,KACjBmD,UAAU,EACVC,SAAU,EACVC,IAAK,IAGcC,EAgKlB,WA/JW1D,SAAAA,EAAAA,GAAS,EAAA,KAAA,GACdA,KAAAA,QAAUC,OAAOC,OAAO,GAAIb,EAAgBW,GAE5CM,KAAAA,UAAY,KACZqD,KAAAA,UAAY,KACZC,KAAAA,UAAY,KACZT,KAAAA,OAAS,KACTU,KAAAA,WAAY,EACZC,KAAAA,OAAS,KACTC,KAAAA,SAAW,KAAKC,eAEhBC,KAAAA,WAAa,KAAKA,WAAWvD,KAAK,MAElCI,KAAAA,QAkJN,OAAA,EAAA,EAAA,CAAA,CAAA,IAAA,QA/IO,MAAA,WACDR,KAAAA,UAAY,KAAK4D,YACjBlE,KAAAA,QAAQD,OAAOsD,UAAY,GAC3BrD,KAAAA,QAAQD,OAAOiC,YAAY,KAAK1B,WAEhC6D,KAAAA,iBACAC,KAAAA,mBAyIN,CAAA,IAAA,iBAtIgB,MAAA,WACVR,KAAAA,UAAUS,QAAU,KAAKJ,aAqI/B,CAAA,IAAA,iBAlIgB,MAAA,WAAA,IAAA,EAAA,KACX,IAAC,KAAKjE,QAAQyD,IACV,MAAA,IAAIa,MAAV,qBAGGR,KAAAA,OAAS,IAAIS,MAAM,KAAKvE,QAAQyD,KAChCK,KAAAA,OAAOU,iBAAmB,WAC7B,EAAKC,kBAAkB,EAAKX,OAAON,UACnC,EAAKkB,mBAAmB,EAAKZ,OAAOa,YAAa,EAAKb,OAAON,WAG1DM,KAAAA,OAAOc,aAAe,SAAA1C,GACnB2C,IAAAA,EAAO3C,EAAM4C,cAAcH,YACjC,EAAKxB,OAAOL,SAAS+B,GACrB,EAAKH,mBAAmBG,EAAM,EAAKf,OAAON,WAGvCM,KAAAA,OAAOiB,QAAU,WACpB,EAAKC,mBAAkB,IAGpBlB,KAAAA,OAAOmB,QAAU,WACpB,EAAKD,mBAAkB,IAGpBlB,KAAAA,OAAOoB,QAAU,WACpB,EAAKF,mBAAkB,IAGpBlB,KAAAA,OAAOqB,QAAU,WAIjB7E,KAAAA,UAAU0B,YAAY,KAAK8B,UAiGjC,CAAA,IAAA,gBA9Fe,MAAA,WACTF,KAAAA,UAAUS,aAAUe,IA6F1B,CAAA,IAAA,aA1FY,MAAA,YACQ,KAAKvB,UAEjBwB,KAAAA,OAEAC,KAAAA,UAqFR,CAAA,IAAA,OAjFM,MAAA,WACAxB,KAAAA,OAAOuB,OACPL,KAAAA,mBAAkB,KA+ExB,CAAA,IAAA,QA5EO,MAAA,WACDlB,KAAAA,OAAOwB,QACPN,KAAAA,mBAAkB,KA0ExB,CAAA,IAAA,oBAvEiBnB,MAAAA,SAAAA,GACXA,KAAAA,UAAYA,EACZD,KAAAA,UAAUtE,UAAyB,aAAA,OAAA,KAAKuE,UAAY,QAAU,UAqEpE,CAAA,IAAA,oBAlEiBL,MAAAA,SAAAA,GAAU,IAAA,EAAA,KACrBL,KAAAA,OAAS,IAAIrD,EAAJ,QAAgBK,SAASoF,cAAkB,IAAA,OAAA,KAAKxB,WAAa,CACzEnE,IAAK4D,EACL9D,SAAU,SAAAH,GACR,EAAKuE,OAAOa,YAAcpF,OA8D/B,CAAA,IAAA,eArDc,MAAA,WAENiG,OADUC,OAAOC,aAAa,GAAKlD,KAAKmD,MAAsB,GAAhBnD,KAAKoD,WACtCC,KAAKC,QAmD1B,CAAA,IAAA,YAhDW,MAAA,WACJxF,IAAAA,EAAYH,SAASgB,cAAc,OACzCb,EAAUhB,UAAY,eAEhByG,IAAAA,EAAS5F,SAASgB,cAAc,OACtC4E,EAAOzG,UAAY,+BACdsE,KAAAA,UAAYzD,SAASgB,cAAc,QACnCyC,KAAAA,UAAUtE,UAAf,iBACAyG,EAAO/D,YAAY,KAAK4B,WACxBtD,EAAU0B,YAAY+D,GAEhBC,IAAAA,EAAW7F,SAASgB,cAAc,OACxC6E,EAAS1G,UAAY,iCACrB0G,EAAS3C,UAC6B,kCAAA,OAAA,KAAKU,SAD3C,YAEAzD,EAAU0B,YAAYgE,GAEhBC,IAAAA,EAAQ9F,SAASgB,cAAc,OAQ9Bb,OAPP2F,EAAM3G,UAAY,6BACbqE,KAAAA,UAAYxD,SAASgB,cAAc,OACnCwC,KAAAA,UAAUrE,UAAY,OACtBqE,KAAAA,UAAUuC,UAAY,QAC3BD,EAAME,OAAO,KAAKxC,WAElBrD,EAAU0B,YAAYiE,GACf3F,IAuBR,CAAA,IAAA,qBApBkBuE,MAAAA,SAAAA,EAAMrB,GACvBqB,EAAO,KAAKuB,mBAAmBvB,GAC/BrB,EAAW,KAAK4C,mBAAmB5C,GAC9BG,KAAAA,UAAUuC,UAAerB,GAAAA,OAAAA,EAAUrB,OAAAA,OAAAA,KAiBzC,CAAA,IAAA,qBAdkB6C,MAAAA,SAAAA,GACXC,IAAAA,EAAO,IAAIT,KAAK,MACtBS,EAAKC,gBAA0B,IAAVF,GACjBG,IAAAA,EAASF,EAAKG,cAAcC,OAAO,GAAI,GAEvCC,EAASH,EAAOI,MAAM,KAInBJ,OAHHG,EAAOE,OAAS,GAAmB,OAAdF,EAAO,KAC9BH,EAASG,EAAOG,MAAM,GAAGC,KAAK,MAEzBP,IAKR,CAAA,IAAA,UAFS,MAAA,WACHQ,KAAAA,oBACN,EAAA,GAAA,QAAA,QAAA;;ADnLH,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,OAAA,eAAA,QAAA,UAAA,CAAA,YAAA,EAAA,IAAA,WAAA,OAAA,EAAA,WAAA,IAAA,EAAA,EAAA,QAAA,kBAAA,SAAA,EAAA,GAAA,OAAA,GAAA,EAAA,WAAA,EAAA,CAAA,QAAA","file":"index.map","sourceRoot":"../../src/audioPlayer","sourcesContent":["// reference: https://stackoverflow.com/a/33006528/1553656\n\nimport \"./rangeSlider.css\";\n\nconst defaultOptions = {\n  className: \"\",\n\n  value: 0,\n  draggerSize: 12,\n  barHeight: 2,\n  onChange: null,\n\n  min: 0,\n  max: 100,\n  precision: 0\n};\n\nexport default class RangeSlider {\n  constructor(parent, options) {\n    this.options = Object.assign({}, defaultOptions, options);\n    this.parent = parent || document.body;\n    this.isMoving = false;\n    this.container = null;\n    this.dragger = null;\n    this.bar = null;\n\n    this._handleMouseDown = this._handleMouseDown.bind(this);\n    this._handleMouseUp = this._handleMouseUp.bind(this);\n    this._handleMouseMove = this._handleMouseMove.bind(this);\n    this._handleResize = this._handleResize.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    this._render();\n    const position = this._calculatePosition(this.options.value);\n    this._updateUI(position);\n  }\n\n  _createContainer() {\n    const container = document.createElement(\"div\");\n    container.className = `range-slider ${this.options.className}`;\n    container.style.height = `${this.options.barHeight}px`;\n    this.container = container;\n    return container;\n  }\n\n  _createBar() {\n    const bar = document.createElement(\"span\");\n    bar.style.height = `${this.options.barHeight}px`;\n    bar.style.paddingLeft = `${this.options.draggerSize / 2}px`;\n    bar.style.paddingRight = `${this.options.draggerSize / 2}px`;\n    bar.className = \"progress-bar\";\n    this.bar = bar;\n    return bar;\n  }\n\n  _createDragger() {\n    const dragger = document.createElement(\"span\");\n    dragger.style.width = `${this.options.draggerSize}px`;\n    dragger.style.height = `${this.options.draggerSize}px`;\n    dragger.style.top = `-${(this.options.draggerSize -\n      this.options.barHeight) /\n      2}px`;\n    dragger.className = \"progress-dragger\";\n    this.dragger = dragger;\n    return dragger;\n  }\n\n  _calculateValue(position, positionMax) {\n    const value =\n      (position * (this.options.max - this.options.min)) / positionMax +\n      this.options.min;\n    return +value.toFixed(this.options.precision);\n  }\n\n  _calculatePosition(value) {\n    const positionMax = this._getPositionMax();\n    return (\n      ((value - this.options.min) * positionMax) /\n      (this.options.max - this.options.min)\n    );\n  }\n\n  _createSlider() {\n    const container = this._createContainer();\n    const bar = this._createBar();\n    const dragger = this._createDragger();\n    bar.appendChild(dragger);\n    container.appendChild(bar);\n\n    this._bindEvent(container);\n\n    return container;\n  }\n\n  _move(event) {\n    if (!this.isMoving) return;\n    let min = 0,\n      max = this._getPositionMax();\n\n    // Instead of using `offsetLeft`, we need to using\n    // `getBoundingClientRect().left. Because the offsetLeft is relative to none\n    // static parent.\n    let elementLeft = this.container.getBoundingClientRect().left;\n\n    // fix for scroll\n    elementLeft += document.documentElement.scrollLeft;\n\n    if (elementLeft < 0) elementLeft = Math.abs(elementLeft) / 2;\n    let mousePos = event.pageX - elementLeft - this.dragger.offsetWidth / 2,\n      position = mousePos > max ? max : mousePos < min ? min : mousePos;\n\n    const value = this._calculateValue(position, max);\n    this.setValue(value);\n    if (this.options.onChange) {\n      this.options.onChange(value);\n    }\n  }\n\n  _getPositionMax() {\n    return this.container.offsetWidth - this.dragger.offsetWidth;\n  }\n\n  _updateUI(position) {\n    const positionMax = this._getPositionMax();\n    this.dragger.style.left = `${position}px`;\n    let width = (position / positionMax) * 100;\n    this.bar.style.width = `${width}%`;\n  }\n\n  _handleMouseDown(event) {\n    this.isMoving = true;\n    this._move(event);\n  }\n\n  _handleMouseUp(event) {\n    this.isMoving = false;\n  }\n\n  _handleMouseMove(event) {\n    this._move(event);\n  }\n\n  _handleResize(event) {\n    this._init();\n  }\n\n  _bindEvent(container) {\n    container.addEventListener(\"mousedown\", this._handleMouseDown);\n    document.addEventListener(\"mouseup\", this._handleMouseUp);\n    document.addEventListener(\"mousemove\", this._handleMouseMove);\n    window.addEventListener(\"resize\", this._handleResize, true);\n  }\n\n  _removeEvent() {\n    if (!this.container) return;\n    this.container.removeEventListener(\"mousedown\", this._handleMouseDown);\n    document.removeEventListener(\"mouseup\", this._handleMouseUp);\n    document.removeEventListener(\"mousemove\", this._handleMouseMove);\n  }\n\n  _render() {\n    const slider = this._createSlider();\n    this.parent.innerHTML = \"\";\n    this.parent.appendChild(slider);\n  }\n\n  destroy() {\n    this._removeEvent();\n  }\n\n  getValue() {\n    return this.options.value;\n  }\n\n  setValue(value) {\n    this.options.value = value;\n    const position = this._calculatePosition(value);\n    this._updateUI(position);\n  }\n}\n","export {default} from './rangeSlider'","/*\n * @author: wayou\n * @date: 2018-11-08 10:25:29\n * @description: audio player with ui control\n * media events references:\n * https://developer.mozilla.org/en-US/docs/Web/Guide/Events/Media_events\n *\n */\n\nimport './audioPlayer.css';\nimport RangeSlider from '../rangeSlider';\n\nconst defaultOptions = {\n  parent: document.body,\n  autoPlay: false,\n  duration: 0,\n  url: ''\n};\n\nexport default class AudioPlayer {\n  constructor(options) {\n    this.options = Object.assign({}, defaultOptions, options);\n\n    this.container = null;\n    this.timeHoler = null;\n    this.toggleBtn = null;\n    this.slider = null;\n    this.isPlaying = false;\n    this.player = null;\n    this.sliderId = this._getSliderId();\n\n    this.togglePlay = this.togglePlay.bind(this);\n\n    this._init();\n  }\n\n  _init() {\n    this.container = this._createUI();\n    this.options.parent.innerHTML = '';\n    this.options.parent.appendChild(this.container);\n\n    this._initialPlayer();\n    this._initialEvents();\n  }\n\n  _initialEvents() {\n    this.toggleBtn.onclick = this.togglePlay;\n  }\n\n  _initialPlayer() {\n    if (!this.options.url) {\n      throw new Error(`missing audio url`);\n    }\n\n    this.player = new Audio(this.options.url);\n    this.player.onloadedmetadata = () => {\n      this._initializeSlider(this.player.duration);\n      this._updateTimeDisplay(this.player.currentTime, this.player.duration);\n    };\n\n    this.player.ontimeupdate = event => {\n      const time = event.currentTarget.currentTime;\n      this.slider.setValue(time);\n      this._updateTimeDisplay(time, this.player.duration);\n    };\n\n    this.player.onended = () => {\n      this._playStatusChange(false);\n    };\n\n    this.player.onpause = () => {\n      this._playStatusChange(false);\n    };\n\n    this.player.onerror = () => {\n      this._playStatusChange(false);\n    };\n\n    this.player.preload = 'metadata';\n\n    // we need to append the audio to DOM or the document.addEventListener won't\n    // fire\n    this.container.appendChild(this.player);\n  }\n\n  _removeEvents() {\n    this.toggleBtn.onclick = undefined;\n  }\n\n  togglePlay() {\n    const isPlaying = !this.isPlaying;\n    if (isPlaying) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  }\n\n  play() {\n    this.player.play();\n    this._playStatusChange(true);\n  }\n\n  pause() {\n    this.player.pause();\n    this._playStatusChange(false);\n  }\n\n  _playStatusChange(isPlaying) {\n    this.isPlaying = isPlaying;\n    this.toggleBtn.className = `icon icon-${this.isPlaying ? 'pause' : 'play'}`;\n  }\n\n  _initializeSlider(duration) {\n    this.slider = new RangeSlider(document.querySelector(`#${this.sliderId}`), {\n      max: duration,\n      onChange: value => {\n        this.player.currentTime = value;\n      }\n    });\n  }\n\n  /**\n   * guid generation taken from\n   * https://stackoverflow.com/questions/6860853/generate-random-string-for-div-id/6860916#6860916\n   */\n  _getSliderId() {\n    var randLetter = String.fromCharCode(65 + Math.floor(Math.random() * 26));\n    return randLetter + Date.now();\n  }\n\n  _createUI() {\n    const container = document.createElement('div');\n    container.className = 'audio-player';\n\n    const toggle = document.createElement('div');\n    toggle.className = 'player-section player-toggle';\n    this.toggleBtn = document.createElement('span');\n    this.toggleBtn.className = `icon icon-play`;\n    toggle.appendChild(this.toggleBtn);\n    container.appendChild(toggle);\n\n    const progress = document.createElement('div');\n    progress.className = 'player-section player-progress';\n    progress.innerHTML =\n        `<div class=\"player-slider\" id=\"${this.sliderId}\"></div>`;\n    container.appendChild(progress);\n\n    const timer = document.createElement('div');\n    timer.className = 'player-section player-time';\n    this.timeHoler = document.createElement('div');\n    this.timeHoler.className = 'time';\n    this.timeHoler.innerText = '00:00';\n    timer.append(this.timeHoler);\n\n    container.appendChild(timer);\n    return container;\n  }\n\n  _updateTimeDisplay(time, duration) {\n    time = this._formatTime2HHMMSS(time);\n    duration = this._formatTime2HHMMSS(duration);\n    this.timeHoler.innerText = `${time} / ${duration}`;\n  }\n\n  _formatTime2HHMMSS(seconds) {\n    const date = new Date(null);\n    date.setMilliseconds(seconds * 1000);\n    let result = date.toISOString().substr(11, 8);\n\n    let splits = result.split(':');\n    if (splits.length > 2 && splits[0] === '00') {\n      result = splits.slice(1).join(':');\n    }\n    return result;\n  }\n\n  destroy() {\n    this._removeEvents();\n  }\n}\n"]}